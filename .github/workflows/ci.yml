name: adds new files to the repo

on:
  push:
    branches:
      - ci
  schedule:
    - cron: "0,5,10,15,20,25,30 0 * * *"      
  repository_dispatch:
    types: [updated]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout Repository
      uses: actions/checkout@v2
      with:
        ref: refs/heads/master
    - name: Run Crawler
      uses: ./        
    - name: Get current date
      id: date
      run: echo "::set-output name=date::$(date +'%Y-%m-%d')"        
    - name: Create Pull Request
      id: cpr
      uses: peter-evans/create-pull-request@v2
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        commit-message: 'ci: add files for ${{steps.date.outputs.date}}'
        committer: GitHub <noreply@github.com>
        author: ${{ github.actor }} <${{ github.actor }}@users.noreply.github.com>
        title: '[feat] [ci] new files for ${{steps.date.outputs.date}}'
        body: |
          new report
          - contains ${{steps.date.outputs.date}} date
          - auto-generated by [create-pull-request][1]

          [1]: https://github.com/peter-evans/create-pull-request
        labels: ci, pr
        assignees: mayrop
        reviewers: mayrop
        branch: create-pull-request/patch
        base: master
        request-to-parent: false
    - name: Check Outputs
      run: |
        echo "Pull Request Number - ${{ env.PULL_REQUEST_NUMBER }}"
        echo "Pull Request Number - ${{ steps.cpr.outputs.pr_number }}"        